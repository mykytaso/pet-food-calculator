{% extends "base.html" %}
{% load static %}

{% block body %}

<div class="container-fluid">

  <!-- Title and Edit Button -->
  <div class="row justify-content-center" style="margin-top:20px">
    <!-- Main Title Section -->
    <div class="col-auto shadow" style="border-radius: 30px; background-color: #ffffff; padding: 10px;">

      <div class="row justify-content-center align-items-center"
           style="margin: 10px 4px 0 4px; padding: 0 0 0 0;"
      >

        <!-- Add Food -->
        <div class="col-auto m-0 p-0">
          <button class="btn btn-pet-nav"
                  id="add-row"
                  style="border-radius: 30px 0 0 30px"
          >
            + Add food
          </button>
        </div>


        <!-- Calculate Price Button -->
        <div class="col-auto m-0 p-0">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="toggle-cost">
            <label class="form-check-label" for="toggle-cost" style="font-weight: 700; color: #5e80fd"></label>
          </div>
        </div>

      </div>
    </div>
  </div>


  <!-- This row is used to display the food rows dynamically -->
  <div class="row justify-content-center" id="food-rows" style="color: #5e80fd;"></div>


  <!-- Result Section -->
  <div class="row justify-content-center font-default mb-5">
    <div class="col-auto food-box">

      <table style="font-weight: 700; margin-bottom: 20px; color: var(--dark-color);">
        <tr>
          <td style="padding: 6px 0">
            Total day energy:
          </td>
          <td style="padding: 6px 0"><span id="total-kcal" style="padding-left: 10px">0</span></td>
        </tr>
        <tr>
          <td>Total day cost:</td>
          <td><span id="total-cost" style="padding-left: 10px">0.00</span></td>
        </tr>
      </table>

    </div>
  </div>


  <!-- Template for a single food row -->
  <template id="food-row-template">
    <div class="col-auto food-box food-row">

      <!-- Delete Row -->
      <div class="row align-items-center justify-content-between">
        <div class="col-auto">
          <div class="row align-items-center justify-content-start m-0 p-0 gap-2">
            <div class="col-auto m-0 p-0">
              <img src="{% static 'images/pet_food_icon.png' %}"
                   alt="pet food icon"
                   style="width: 30px; height: 30px;"
              >
            </div>
            <div class="col-auto m-0 p-0">
              <span class="food-form-title">
                Food
              </span>
            </div>
          </div>
        </div>

        <div class="col-auto">
          <a class="btn p-0 m-0 text-decoration-none text-secondary align-self-end delete-row">
            <span style="color: var(--dark-color);">
              <i class="bi bi-x-lg"></i>
            </span>
          </a>
        </div>
      </div>


      <div class="food-form-row">
        <label class="food-form-label">Food kcal/kg</label>
        <input name="kcal"
               autocomplete="off"
               class="form-control form-control-sm food-form-field kcalPerKg"
               placeholder="kcal/kg"
               aria-label="Kcal per kg" />
      </div>


      <div class="food-form-row">
        <label class="food-form-label">Meals per day</label>
        <input name="meals"
               autocomplete="off"
               class="form-control form-control-sm food-form-field mealsNumber"
               placeholder="meals"
               aria-label="Meals per day" />
      </div>


      <div class="food-form-row">
        <label class="food-form-label">Meal size</label>
        <input name="meal_size"
               autocomplete="off"
               class="form-control form-control-sm food-form-field portionSize"
               placeholder="grams"
               aria-label="Meal size" />
      </div>


      <div class="food-form-row cost-field">
        <label class="food-form-label">Package size</label>
        <input name="package_size"
               autocomplete="off"
               class="form-control form-control-sm food-form-field packageSize"
               placeholder="grams"
               aria-label="Package size" />
      </div>


      <div class="food-form-row cost-field">
        <label class="food-form-label">Package price</label>
        <input name="package_price"
               autocomplete="off"
               class="form-control form-control-sm food-form-field price"
               placeholder="$"
               aria-label="Package price" />
      </div>


      <!-- Results -->
      <div class="row">
        <div class="col"
             style="padding: 10px 0 0 0; margin: 10px 10px 0 10px; border-top: 1px solid #d4d5da;"
        >
          <div>
            <table>
              <tr>
                <td>Day energy:</td>
                <td>
                  <span class="kcal-per-day" style="margin-left: 8px">
                    <span class="kcal-output">0</span>
                  </span>
                </td>
              </tr>
              <tr {% if pet.calculate_price == 'off' %} hidden {% endif %}>
                <td>Day cost:</td>
                <td>
                  <span class="cost-per-day" style="margin-left: 8px">
                    </strong> <span class="cost-output">0</span>
                  </span>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

    </div>
  </template>


  <script src="/static/js/script.js"></script>

</div>
{% endblock %}
